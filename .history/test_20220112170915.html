<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>
    function reverse(n) {
      if (n == 0) {
        return
      }
      var x = Number(prompt())
      reverse(n - 1)
      console.log(x)
    }

    // 斐波那契
    function fibb(n) {
      if (n < 3) {
        return 1
      } else {
        return fibb(x - 1) + fibb (x - 2)
      }
    }

    var array = []
    function find(start, history) {
      if (start == target) {
        array.push(history)
        return
      }
      if (start > target) {
        return
      }
      find(start * 3, '(' + history + ') * 3')
      find(start + 5, history + ' + 5')
    }

    find(1, '1')
    return array


    function countBs(str) {
      var count = 0
      for (i = 0;i < str.length;i++) {
        if (ttr[i] === 'B') {
          count++
        }
        return count
      }
    }

    function countBs(str,char) {
      var count = 0
      for (i = 0;i < str.length;i++) {
        if (str[i] === char) {
          count++
        }
        return count
      }
    }

    function min(a,b) {
      if (a > b) {
        return b
      } else {
        return a
      }
    }


    function indexof(array,value) {
      for (i = 0;i < array.length;i++) {
        if (array[i] == value) {
          return i
        }
      }
      return -1
    }

    function push(array,val) {
      array[val.length] = val
      return array.length
    }

    function pop(array) {
      var t = array[array.length - 1]
      array.length--
      return t
    }

    function slice(array,start,end) {
      var result = []
      for(i = start;i < end;i++) {
        result.push(array[i])
      }
      return result
    }

    function fill(array,val) {
      for(i = 0 ; i < array.length - 1;i ++) {
        array[i] = val
      }
      return array
    }

    function sum() {
      var count = 0
      for(i = 0;i <arguments.length;i++) {
        count += arguments[i]
      }
      return count
    }

    function random() {
      var random1 = Math.floor(Math.random() * 100) + 1
      return random1
    }


    //创建一个新数组反转数组
    function reverseArray(array) {
      var len = array.length
      var result = Array(len)
      for (i = len - 1;i >= 0;i--) {
        result[len - i - 1] = array[i]
      }
      return result
    }

    //把数组转为链表
    function arrayToList(array) {
      var nodes = []         //初始化一个空数组
      for(var i = 0;i < array.length;i++) {
        var node = {         //创建一个节点
          val:array[i],
          next :null
        }
        nodes[i].push = node  //把每一个节点放到数组中
      }
      for(var i = 0; i < nodes.length;i++) {
        nodes.next = nodes[i + 1]     //链接到下一个节点
      }
      return nodes[0]
    }

    function arrayToList2(array) {
      if (array.length == 0) {
        return null
      }
      var head = {
        val:array[0],
        next:null
      }
      var prev = head
      for (var i = 0;i < array.length;i++) {
        var node = {
          val:array[i],
          next: null
        }
        prev.next = node
        prev = node
      }
      return head
    }

    function arrayToList3(array) {
      var dummy = {
        val:array[0],
        next:null
      }
      var prev = dummy
      for (var i = 0;i < array.length;i++) {
        var node = {
          val:array[i],
          next: null
        }
        prev.next = node
        prev = node
      }
      return dummy.next
    }

    function arrayToList4(array) {
      var prev = null
      for (var i = array.length - 1;i >= 0;i--) {
        var node = {
          val:array[i],
          next: null
        }
        node.next = prev
        prev = node
      }
      return prev
    }

    function arrayToListR(array) {
      if(array.length == 0) {
        return null
      }
      var head = {
        val: array[0],
        next: null
      }
      var tail = arrayToListR(array.slice(1))
      head.next = tail
      return tail
    }

    //将数组array从start开始到结束转为链表
    function arrayToListR2(array,start = 0) {
      if(start == array.length) {
        return null
      }
      var head = {
        val: array[start],
        next: null
      }
      var tail = arrayToListR2(array,start + 1)
      head.next = tail
      return tail
    }




    //把链表转为数组
    function listToArray(head) {
      if (head == null) {
        return []
      }

      var result = []

      while (head) {
        result.push(head.val)
        head = head.next
      }
      return result
    }

    function listToArrayR(head) {
      if (head == null) {
        return []
      }

      var result = listToArrayR(head.next)
      return [head.val].concat(result)
    }

    function prepend(val,head) {
      return {
        val: val,
        next: head
      }
    }

    function addend(val,head) {
      var node = {
        val:val,
        naxt:null
      }
      if (head == null) {
        return node
      }

      var p = head
      while(p.next) {
        p = p.next
      }
      p.next = node
      return head
    }

    function nth(list,n) {
      if (list == null || n < 0) {
        return undefined
      }
      var p = list
      var c = 0
      while(p && c < n) {
        c++
        p = p.next
      }

      return p.val
    }

    function nth2(list,n) {
      if (list == null || n < 0) {
        return undefined
      }
      if (n == 0) {
        return list.val
      }
      return nth2(list.next,n - 1)
    }

    function insert(list,n,val) {
      var node = {
        val:val,
        next:null
      }
      if (n == 0) {

      }
      var p = list
      var c = 0
      while(p && c < n - 1) {
        c++
        p = p.next
      }

      var q = p.next
      p.next = node
      node.next = q
    }


    function isGreatThen(m) {
      return function (n) {
        if (n > m) {
          return true
        } else {
          return false
        }
      }
    }
    var isGreatThen5 = isGreatThen(5)
    var isGreatThen10 = isGreatThen(10)
    var isGreatThen100 = isGreatThen(100)



    function noisy(f) {
      return function(...args) {         //剩余参数 rest parameter
        console.log('calling with',args);
        var val = f(...args);            //展开运算符 spread operator
        console.log('called with',args,'- got',val);
        return val;
      }
    }
    noisy(Boolean)(0)


    //结构化数据        split() 方法用于把一个字符串分割成字符串数组
    function parseCsv(csvStr) {
      var lines = csvStr.split('\n')
      var firstLine = lines.shift()
      var headers = firstLine.split(',')

      var result = []
      lines.forEach(function(line) {
        var values = line.split(',')
        var obj = {}

        for (var i = 0; i < headers.length; i++) {
          var h = headers[i]
          var v = values[i]
          obj[h] = v
        }
        result.push(obj)
      })
      return result
    }

    function parseQueryString(str) {
      var pairs = str.split('&')
      var obj = {}
      pairs.forEach(function(pair) {
        var parts = pair.split('=')
        var key = parts[0]
        var val = parts[1]
        obj[key] = val
      })
      return obj
    }




    function stringify(value) {
      if (Array.isArray(value)) { //  [1,2,{a:1,b:2}]??
        var str = '['
        value.forEach(it => {
          if (typeof it == 'number' || typeof it == 'string' || typeof it == 'boolean' || it == null) {
            str += it
          } else {
            str += stringify(it)
          }
          str += ','
        })
        str = str.slice(0, -1)
        str += ']'
        return str
      } else if (value && typeof value == 'object') {  // {x:1,y:[1,2,3]}
        var str = '{'
        for (var key in value) {
          var it = value[key]
          if (typeof it == 'number' || typeof it == 'string' || typeof it == 'boolean' || it == null) {
            str += '"' + key + '":' + it
          } else {
            str += '"' + key + '":' + stringify(it)
          }
          str += ','
        }
        str = str.slice(0, -1)
        str += '}'
        return str
      }
    }





    var ary = [1,2,3,4,5]
    var sum = 0
    var max = -Infinity
    for (var i = 0;i < ary.length;i++) {
      sum += ary[i]
      max = ary[i] > max ? ary[i] : max
    }
    console.log(sum);
    console.log(max);


    function reduce(ary,reducer,initial) {
      var start = 0
      if (arguments.length == 2) {
        initial = ary[0]
        start = 1
      }
      for (var i = 1;i < ary.length;i++) {
        result = reducer(ary[i],result)
      }
      return initial
    }

    reduce([1,2,3,4,5] , (sum,current) => sum + current,0)
    reduce([1,2,3,4,5] , (sum,current) => sum + current)
    reduce([2,3,4,5] , (sum,current) => sum + current,1)

    reduce([1,2,3,4,5] , (product,current) => product * current,1)
    reduce([1,2,3,4,5] , (product,current) => product * current)
    reduce([2,3,4,5] , (product,current) => product * current,1)

    reduce([1,2,3,4,5] , (max,current) => Math.max(max,current),-Infinity)
    reduce([1,2,3,4,5] , (max,current) => Math.max(max,current))
    reduce([2,3,4,5] , (max,current) => Math.max(max,current),1)



    function mapValues(obj,mapper) {
      var result = {}
      for (var key in obj) {
        result[key] = mapper(val,key)
      }
      return result
    }
  </script>
</body>
</html>
